name: iOS Structure Test - Check Project Structure

on:
  push:
    branches: [ main ]
    paths: [ 'mobile_apps/ALADDIN_iOS/structure_test.txt' ]

jobs:
  structure-test:
    runs-on: macos-latest
    timeout-minutes: 5
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Structure Test - Check Project Structure
      run: |
        echo "üîç –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê - –ü–†–û–í–ï–†–ö–ê"
        echo "==============================="
        
        echo "1Ô∏è‚É£ –ü–†–û–í–ï–†–Ø–ï–ú –ö–û–†–ù–ï–í–£–Æ –°–¢–†–£–ö–¢–£–†–£:"
        ls -la
        
        echo ""
        echo "2Ô∏è‚É£ –ò–©–ï–ú –í–°–ï .xcodeproj –§–ê–ô–õ–´:"
        find . -name "*.xcodeproj" -type d
        
        echo ""
        echo "3Ô∏è‚É£ –ò–©–ï–ú –í–°–ï .xcworkspace –§–ê–ô–õ–´:"
        find . -name "*.xcworkspace" -type d
        
        echo ""
        echo "4Ô∏è‚É£ –ü–†–û–í–ï–†–Ø–ï–ú –°–û–î–ï–†–ñ–ò–ú–û–ï mobile_apps:"
        if [ -d "mobile_apps" ]; then
          ls -la mobile_apps/
          
          echo ""
          echo "5Ô∏è‚É£ –ü–†–û–í–ï–†–Ø–ï–ú –°–û–î–ï–†–ñ–ò–ú–û–ï mobile_apps/ALADDIN_iOS:"
          if [ -d "mobile_apps/ALADDIN_iOS" ]; then
            ls -la mobile_apps/ALADDIN_iOS/
            
            echo ""
            echo "6Ô∏è‚É£ –ò–©–ï–ú iOS –§–ê–ô–õ–´:"
            find mobile_apps/ALADDIN_iOS/ -name "*.swift" | head -5
            find mobile_apps/ALADDIN_iOS/ -name "Info.plist" | head -5
            
          else
            echo "‚ùå mobile_apps/ALADDIN_iOS –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
          fi
        else
          echo "‚ùå mobile_apps –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!"
        fi
        
        echo ""
        echo "7Ô∏è‚É£ –ü–†–û–í–ï–†–Ø–ï–ú –í–°–ï iOS –ü–†–û–ï–ö–¢–´ –í –†–ï–ü–û–ó–ò–¢–û–†–ò–ò:"
        find . -name "*.xcodeproj" -o -name "*.xcworkspace" | head -10
        
    - name: Upload Structure Results
      uses: actions/upload-artifact@v4
      if: always()
      with:
        name: ios-structure-test
        path: .
        retention-days: 1
