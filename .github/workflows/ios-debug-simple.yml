name: iOS Debug Simple

on:
  push:
    branches: [ main ]
    paths: [ 'mobile_apps/ALADDIN_iOS/debug_simple.txt' ]

jobs:
  debug-ios:
    runs-on: macos-latest
    timeout-minutes: 10
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Setup Xcode
      uses: maxim-lobanov/setup-xcode@v1
      with:
        xcode-version: '16.0.0'
        
    - name: Debug iOS Environment
      run: |
        echo "üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê iOS –û–ö–†–£–ñ–ï–ù–ò–Ø"
        echo "============================="
        
        echo ""
        echo "üì± 1. –í–µ—Ä—Å–∏—è Xcode:"
        xcodebuild -version
        
        echo ""
        echo "üì± 2. –î–æ—Å—Ç—É–ø–Ω—ã–µ SDK:"
        xcodebuild -showsdks | grep iOS
        
        echo ""
        echo "üì± 3. –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∏–º—É–ª—è—Ç–æ—Ä—ã:"
        xcrun simctl list devices available | grep iPhone | head -5
        
        echo ""
        echo "üì± 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:"
        cd mobile_apps/ALADDIN_iOS
        ls -la
        
        echo ""
        echo "üì± 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã:"
        xcodebuild -project ALADDIN.xcodeproj -list
        
        echo ""
        echo "üì± 6. –¢–µ—Å—Ç –ø—Ä–æ—Å—Ç–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (–±–µ–∑ destination):"
        if xcodebuild -project ALADDIN.xcodeproj -scheme ALADDIN build; then
          echo "‚úÖ –£–°–ü–ï–•: –ö–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ destination —Ä–∞–±–æ—Ç–∞–µ—Ç!"
        else
          echo "‚ùå –û–®–ò–ë–ö–ê: –ö–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ destination –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
        fi
        
        echo ""
        echo "üì± 7. –¢–µ—Å—Ç —Å generic destination:"
        if xcodebuild -project ALADDIN.xcodeproj -scheme ALADDIN -destination "generic/platform=iOS Simulator" build; then
          echo "‚úÖ –£–°–ü–ï–•: generic/platform=iOS Simulator —Ä–∞–±–æ—Ç–∞–µ—Ç!"
        else
          echo "‚ùå –û–®–ò–ë–ö–ê: generic/platform=iOS Simulator –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
        fi
        
        echo ""
        echo "üì± 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ build –ø–∞–ø–∫–∏:"
        ls -la build/ || echo "build –ø–∞–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
        
        echo ""
        echo "üì± 9. –ü–æ–∏—Å–∫ .app —Ñ–∞–π–ª–æ–≤:"
        find build/ -name "*.app" -type d || echo ".app —Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
