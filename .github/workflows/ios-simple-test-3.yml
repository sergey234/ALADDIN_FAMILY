name: iOS Simple Test 3 - Check Project

on:
  push:
    branches: [ main ]
    paths: [ 'mobile_apps/ALADDIN_iOS/simple_test_3.txt' ]

jobs:
  check-project-test:
    runs-on: macos-latest
    timeout-minutes: 5
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Setup Xcode
      uses: maxim-lobanov/setup-xcode@v1
      with:
        xcode-version: '16.0.0'
        
    - name: Test 3 - Check Project
      run: |
        echo "üß™ –¢–ï–°–¢ 3: –ü–†–û–í–ï–†–ö–ê –ü–†–û–ï–ö–¢–ê"
        echo "================================"
        
        cd mobile_apps/ALADDIN_iOS
        
        echo "–ü—Ä–æ–≤–µ—Ä—è–µ–º iOS –ø—Ä–æ–µ–∫—Ç..."
        echo "–†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $(pwd)"
        echo "–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤:"
        ls -la
        
        echo ""
        echo "–ü—Ä–æ–≤–µ—Ä—è–µ–º .xcodeproj —Ñ–∞–π–ª:"
        if [ -f "ALADDIN.xcodeproj/project.pbxproj" ]; then
          echo "‚úÖ ALADDIN.xcodeproj –Ω–∞–π–¥–µ–Ω"
          echo "–†–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞: $(du -sh ALADDIN.xcodeproj)"
        else
          echo "‚ùå ALADDIN.xcodeproj –Ω–µ –Ω–∞–π–¥–µ–Ω"
        fi
        
        echo ""
        echo "–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ö–µ–º—É:"
        xcodebuild -project ALADDIN.xcodeproj -list || echo "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ö–µ–º"
        
        echo ""
        echo "–ü—Ä–æ–≤–µ—Ä—è–µ–º build –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:"
        xcodebuild -project ALADDIN.xcodeproj -scheme ALADDIN -showBuildSettings | head -10 || echo "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±–æ—Ä–∫–∏"
        
        echo "‚úÖ –¢–µ—Å—Ç 3 –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ"
        
    - name: Upload Test 3 Results
      uses: actions/upload-artifact@v4
      if: always()
      with:
        name: ios-simple-test-3
        path: mobile_apps/ALADDIN_iOS/
        retention-days: 1
