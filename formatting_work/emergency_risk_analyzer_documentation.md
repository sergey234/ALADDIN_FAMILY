# Документация файла emergency_risk_analyzer.py

## Общая информация
- **Путь**: `/Users/sergejhlystov/ALADDIN_NEW/security/ai_agents/emergency_risk_analyzer.py`
- **Размер**: 299 строк
- **Тип**: Python модуль для анализа рисков экстренных ситуаций
- **Дата создания документации**: 2025-01-27

## Назначение
Анализатор рисков для экстренных ситуаций, применяющий принцип Single Responsibility. Обеспечивает расчет оценки риска для различных типов экстренных событий.

## Основные компоненты

### Класс EmergencyRiskAnalyzer
Главный класс для анализа рисков экстренных ситуаций.

#### Методы:
1. `__init__()` - инициализация с весовыми коэффициентами факторов риска
2. `calculate_risk_score(event)` - расчет общей оценки риска
3. `_calculate_temporal_risk(event)` - временной фактор риска
4. `_calculate_spatial_risk(event)` - пространственный фактор риска
5. `_calculate_type_risk(event)` - типовой фактор риска
6. `_calculate_severity_risk(event)` - фактор риска по серьезности
7. `get_risk_level(risk_score)` - определение уровня риска
8. `analyze_risk_trends(events, days)` - анализ трендов рисков
9. `get_risk_recommendations(risk_score)` - получение рекомендаций

#### Вспомогательные методы:
- `_get_risk_zones()` - получение списка опасных зон
- `_calculate_distance(coord1, coord2)` - расчет расстояния между координатами
- `_calculate_risk_trend(daily_risks)` - расчет тренда рисков

## Зависимости
- `numpy` - для математических вычислений
- `datetime` - для работы с временными метками
- `typing` - для типизации
- `geopy.distance` - для расчета географических расстояний (опционально)

## Импорты из локальных модулей
- `emergency_models` - модели данных (EmergencyEvent, EmergencyType, EmergencySeverity)
- `emergency_time_utils` - утилиты для временного анализа

## Факторы риска
1. **Временной** (30%) - время суток и день недели
2. **Пространственный** (20%) - близость к опасным зонам
3. **Типовой** (20%) - тип экстренной ситуации
4. **Серьезности** (30%) - уровень серьезности события

## Уровни риска
- **critical** (≥0.8) - критический
- **high** (≥0.6) - высокий
- **medium** (≥0.4) - средний
- **low** (<0.4) - низкий

## Особенности реализации
- Обработка исключений с возвратом среднего риска (0.5)
- Использование геопространственного анализа
- Поддержка трендового анализа
- Генерация рекомендаций на основе уровня риска